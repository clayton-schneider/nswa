---
import { Image } from "@astrojs/image/components";
import { Icon } from "astro-icon";

const testomonials = [
  {
    name: "Alex D.",
    title: "Executive",
    text: "Working with Conor and his team has been an absolutely amazing experience. They have done an awesome job of balancing their own advice, while also leaving the final decisions in my court. They know what questions to ask to ensure that Iâ€™m being as tax-efficient as possible. I would highly recommend this team, whether your tax return is simple or complex.",
  },
  {
    name: "Maggie",
    title: "Executive",
    text: "My husband and I are clients and highly value their sound financial advice and knowledge of tax law. They are invaluable resources for us. They take the time to give thoughtful advice and make sound recommendations for their clients.  Highly recommend Natural State Wealth Advisors.",
  },
];
---

<section class="px-edge py-32 relative">
  <Image
    format="webp"
    src={import("@img/testimonial-background.jpg")}
    alt="client testimonial"
    class="absolute inset-0 h-full w-full object-cover"
  />
  <div class="max-w-3xl mx-auto text-text-light text-center relative z-10">
    <h2 class="font-bold text-5xl">Client Testimonials</h2>

    <div class="splide testimonial-carousel" aria-label="testimonial carousel">
      <div class="splide__track">
        <ul class="splide__list">
          {
            testomonials.map((testimonial) => (
              <li class="splide__slide">
                <p class="mt-3 font-rubik text-xl leading-relaxed">
                  {testimonial.text}
                </p>
                <div class="mt-8 flex justify-center items-start space-x-2 ">
                  <div class="relative">
                    <Icon
                      class="absolute -left-16 top-0"
                      name="icomoon-free:quotes-left"
                      size={40}
                    />
                    <p class="font-bold text-2xl">{testimonial.name}</p>
                    <p class="font-rubik text-lg mt-2">{testimonial.title}</p>
                  </div>
                </div>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
  </div>
</section>

<script>
  import Splide from "@splidejs/splide";
  import "@splidejs/splide/css/core";

  new Splide(".testimonial-carousel", {
    autoplay: true,
    interval: 3000,
    type: "loop",
    perPage: 1,
    perMove: 1,
    classes: {
      arrow: "hidden",
      pagination:
        "flex justify-center mt-2 space-x-1 [&>li]:flex [&>li]:items-center h-[14px]",
      page: "w-3 h-3 bg-white/80  rounded-full transition-all duration-300 [&.is-active]:bg-primary  [&.is-active]:w-[14px] [&.is-active]:h-[14px]",
    },
  }).mount();
</script>
